{"version":3,"file":"icu-message-format.js","sources":["../../../src/prism/languages/icu-message-format.js"],"sourcesContent":["import { languages, rest } from '../core.js';\r\nimport { nested, replace } from '../utils/shared.js';\r\n\r\nvar stringPattern = /'[{}:=,](?:[^']|'')*'(?!')/g;\r\n\r\nvar escape = {\r\n\tpattern: /''/g,\r\n\tgreedy: true,\r\n\talias: 'operator'\r\n};\r\nvar string = {\r\n\tpattern: stringPattern,\r\n\tgreedy: true,\r\n\tinside: {\r\n\t\t'escape': escape\r\n\t}\r\n};\r\n\r\nvar message = {\r\n\tpattern: /(?!^)[\\s\\S]+(?=.)/\r\n};\r\n\r\nvar choiceStyleInside = {\r\n\t'punctuation': /\\|/,\r\n\t'range': {\r\n\t\tpattern: /^(\\s*)[+-]?(?:\\d+(?:\\.\\d*)?|∞)\\s*[<#≤]/,\r\n\t\tlookbehind: true,\r\n\t\tinside: {\r\n\t\t\t'operator': /[<#≤]/,\r\n\t\t\t'number': /\\S+/\r\n\t\t}\r\n\t}\r\n};\r\n\r\nvar argumentSource = nested(\r\n\treplace(/\\{(?:[^{}']|'(?![{},'])|''|<0>|<self>)*\\}/.source, [stringPattern.source]), 3\r\n);\r\n\r\nvar nestedMessage = {\r\n\tpattern: RegExp(argumentSource),\r\n\tinside: {\r\n\t\t'message': message,\r\n\t\t'message-delimiter': {\r\n\t\t\tpattern: /./,\r\n\t\t\talias: 'punctuation'\r\n\t\t}\r\n\t}\r\n};\r\n\r\nchoiceStyleInside[rest] = message.inside = languages['icu-message-format'] = {\r\n\t'argument': {\r\n\t\tpattern: RegExp(argumentSource, 'g'),\r\n\t\tgreedy: true,\r\n\t\tinside: {\r\n\t\t\t'content': {\r\n\t\t\t\tpattern: /(?!^)[\\s\\S]+(?=.)/,\r\n\t\t\t\tinside: {\r\n\t\t\t\t\t'argument-name': {\r\n\t\t\t\t\t\tpattern: /^(\\s*)[^{}:=,\\s]+/,\r\n\t\t\t\t\t\tlookbehind: true\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'choice-style': {\r\n\t\t\t\t\t\t// https://unicode-org.github.io/icu-docs/apidoc/released/icu4c/classicu_1_1ChoiceFormat.html#details\r\n\t\t\t\t\t\tpattern: /^(\\s*,\\s*choice\\s*,\\s*)\\S(?:[\\s\\S]*\\S)?/,\r\n\t\t\t\t\t\tlookbehind: true,\r\n\t\t\t\t\t\tinside: choiceStyleInside\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'plural-style': {\r\n\t\t\t\t\t\t// https://unicode-org.github.io/icu-docs/apidoc/released/icu4j/com/ibm/icu/text/PluralFormat.html#:~:text=Patterns%20and%20Their%20Interpretation\r\n\t\t\t\t\t\tpattern: /^(\\s*,\\s*(?:plural|selectordinal)\\s*,\\s*)\\S(?:[\\s\\S]*\\S)?/,\r\n\t\t\t\t\t\tlookbehind: true,\r\n\t\t\t\t\t\tinside: {\r\n\t\t\t\t\t\t\t'offset': /^offset:\\s*\\d+/,\r\n\t\t\t\t\t\t\t'nested-message': nestedMessage,\r\n\t\t\t\t\t\t\t'selector': {\r\n\t\t\t\t\t\t\t\tpattern: /=\\d+|[^{}:=,\\s]+/,\r\n\t\t\t\t\t\t\t\tinside: {\r\n\t\t\t\t\t\t\t\t\t'keyword': /^(?:few|many|one|other|two|zero)$/\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'select-style': {\r\n\t\t\t\t\t\t// https://unicode-org.github.io/icu-docs/apidoc/released/icu4j/com/ibm/icu/text/SelectFormat.html#:~:text=Patterns%20and%20Their%20Interpretation\r\n\t\t\t\t\t\tpattern: /^(\\s*,\\s*select\\s*,\\s*)\\S(?:[\\s\\S]*\\S)?/,\r\n\t\t\t\t\t\tlookbehind: true,\r\n\t\t\t\t\t\tinside: {\r\n\t\t\t\t\t\t\t'nested-message': nestedMessage,\r\n\t\t\t\t\t\t\t'selector': {\r\n\t\t\t\t\t\t\t\tpattern: /[^{}:=,\\s]+/,\r\n\t\t\t\t\t\t\t\tinside: {\r\n\t\t\t\t\t\t\t\t\t'keyword': /^other$/\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'keyword': /\\b(?:choice|plural|select|selectordinal)\\b/,\r\n\t\t\t\t\t'arg-type': {\r\n\t\t\t\t\t\tpattern: /\\b(?:date|duration|number|ordinal|spellout|time)\\b/,\r\n\t\t\t\t\t\talias: 'keyword'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'arg-skeleton': {\r\n\t\t\t\t\t\tpattern: /(,\\s*)::[^{}:=,\\s]+/,\r\n\t\t\t\t\t\tlookbehind: true\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'arg-style': {\r\n\t\t\t\t\t\tpattern: /(,\\s*)(?:currency|full|integer|long|medium|percent|short)(?=\\s*$)/,\r\n\t\t\t\t\t\tlookbehind: true\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'arg-style-text': {\r\n\t\t\t\t\t\tpattern: RegExp(/(^\\s*,\\s*(?!\\s))/.source + nested(/(?:[^{}']|'[^']*'|\\{(?:<self>)?\\})+/.source, 3) + '$'),\r\n\t\t\t\t\t\tlookbehind: true,\r\n\t\t\t\t\t\talias: 'string'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'punctuation': /,/\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t'argument-delimiter': {\r\n\t\t\t\tpattern: /./,\r\n\t\t\t\talias: 'operator'\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t'escape': escape,\r\n\t'string': string\r\n};\r\n"],"names":[],"mappings":";;AAGA,IAAI,gBAAgB;AAEpB,IAAI,SAAS;AAAA,EACZ,SAAS;AAAA,EACT,QAAQ;AAAA,EACR,OAAO;AACR;AACA,IAAI,SAAS;AAAA,EACZ,SAAS;AAAA,EACT,QAAQ;AAAA,EACR,QAAQ;AAAA,IACP,UAAU;AAAA,EACV;AACF;AAEA,IAAI,UAAU;AAAA,EACb,SAAS;AACV;AAEA,IAAI,oBAAoB;AAAA,EACvB,eAAe;AAAA,EACf,SAAS;AAAA,IACR,SAAS;AAAA,IACT,YAAY;AAAA,IACZ,QAAQ;AAAA,MACP,YAAY;AAAA,MACZ,UAAU;AAAA,IACV;AAAA,EACD;AACF;AAEA,IAAI,iBAAiB;AAAA,EACpB,QAAQ,+CAAoD,CAAC,cAAc,MAAM,CAAC;AAAA,EAAG;AACtF;AAEA,IAAI,gBAAgB;AAAA,EACnB,SAAS,OAAO,cAAc;AAAA,EAC9B,QAAQ;AAAA,IACP,WAAW;AAAA,IACX,qBAAqB;AAAA,MACpB,SAAS;AAAA,MACT,OAAO;AAAA,IACP;AAAA,EACD;AACF;AAEA,kBAAkB,IAAI,IAAI,QAAQ,SAAS,UAAU,oBAAoB,IAAI;AAAA,EAC5E,YAAY;AAAA,IACX,SAAS,OAAO,gBAAgB,GAAG;AAAA,IACnC,QAAQ;AAAA,IACR,QAAQ;AAAA,MACP,WAAW;AAAA,QACV,SAAS;AAAA,QACT,QAAQ;AAAA,UACP,iBAAiB;AAAA,YAChB,SAAS;AAAA,YACT,YAAY;AAAA,UACZ;AAAA,UACD,gBAAgB;AAAA;AAAA,YAEf,SAAS;AAAA,YACT,YAAY;AAAA,YACZ,QAAQ;AAAA,UACR;AAAA,UACD,gBAAgB;AAAA;AAAA,YAEf,SAAS;AAAA,YACT,YAAY;AAAA,YACZ,QAAQ;AAAA,cACP,UAAU;AAAA,cACV,kBAAkB;AAAA,cAClB,YAAY;AAAA,gBACX,SAAS;AAAA,gBACT,QAAQ;AAAA,kBACP,WAAW;AAAA,gBACX;AAAA,cACD;AAAA,YACD;AAAA,UACD;AAAA,UACD,gBAAgB;AAAA;AAAA,YAEf,SAAS;AAAA,YACT,YAAY;AAAA,YACZ,QAAQ;AAAA,cACP,kBAAkB;AAAA,cAClB,YAAY;AAAA,gBACX,SAAS;AAAA,gBACT,QAAQ;AAAA,kBACP,WAAW;AAAA,gBACX;AAAA,cACD;AAAA,YACD;AAAA,UACD;AAAA,UACD,WAAW;AAAA,UACX,YAAY;AAAA,YACX,SAAS;AAAA,YACT,OAAO;AAAA,UACP;AAAA,UACD,gBAAgB;AAAA,YACf,SAAS;AAAA,YACT,YAAY;AAAA,UACZ;AAAA,UACD,aAAa;AAAA,YACZ,SAAS;AAAA,YACT,YAAY;AAAA,UACZ;AAAA,UACD,kBAAkB;AAAA,YACjB,SAAS,OAAO,wBAA4B,OAAO,yCAA8C,CAAC,IAAI,GAAG;AAAA,YACzG,YAAY;AAAA,YACZ,OAAO;AAAA,UACP;AAAA,UACD,eAAe;AAAA,QACf;AAAA,MACD;AAAA,MACD,sBAAsB;AAAA,QACrB,SAAS;AAAA,QACT,OAAO;AAAA,MACP;AAAA,IACD;AAAA,EACD;AAAA,EACD,UAAU;AAAA,EACV,UAAU;AACX;"}