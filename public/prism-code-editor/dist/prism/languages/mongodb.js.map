{"version":3,"file":"mongodb.js","sources":["../../../src/prism/languages/mongodb.js"],"sourcesContent":["import { languages } from '../core.js';\r\nimport { clone, insertBefore } from '../utils/language.js';\r\nimport './javascript.js';\r\n\r\nvar operators = [\r\n\t// query and projection\r\n\t'$eq', '$gt', '$gte', '$in', '$lt', '$lte', '$ne', '$nin', '$and', '$not', '$nor', '$or',\r\n\t'$exists', '$type', '$expr', '$jsonSchema', '$mod', '$regex', '$text', '$where', '$geoIntersects',\r\n\t'$geoWithin', '$near', '$nearSphere', '$all', '$elemMatch', '$size', '$bitsAllClear', '$bitsAllSet',\r\n\t'$bitsAnyClear', '$bitsAnySet', '$comment', '$elemMatch', '$meta', '$slice',\r\n\r\n\t// update\r\n\t'$currentDate', '$inc', '$min', '$max', '$mul', '$rename', '$set', '$setOnInsert', '$unset',\r\n\t'$addToSet', '$pop', '$pull', '$push', '$pullAll', '$each', '$position', '$slice', '$sort', '$bit',\r\n\r\n\t// aggregation pipeline stages\r\n\t'$addFields', '$bucket', '$bucketAuto', '$collStats', '$count', '$currentOp', '$facet', '$geoNear',\r\n\t'$graphLookup', '$group', '$indexStats', '$limit', '$listLocalSessions', '$listSessions', '$lookup',\r\n\t'$match', '$merge', '$out', '$planCacheStats', '$project', '$redact', '$replaceRoot', '$replaceWith',\r\n\t'$sample', '$set', '$skip', '$sort', '$sortByCount', '$unionWith', '$unset', '$unwind', '$setWindowFields',\r\n\r\n\t// aggregation pipeline operators\r\n\t'$abs', '$accumulator', '$acos', '$acosh', '$add', '$addToSet', '$allElementsTrue', '$and',\r\n\t'$anyElementTrue', '$arrayElemAt', '$arrayToObject', '$asin', '$asinh', '$atan', '$atan2',\r\n\t'$atanh', '$avg', '$binarySize', '$bsonSize', '$ceil', '$cmp', '$concat', '$concatArrays', '$cond',\r\n\t'$convert', '$cos', '$dateFromParts', '$dateToParts', '$dateFromString', '$dateToString', '$dayOfMonth',\r\n\t'$dayOfWeek', '$dayOfYear', '$degreesToRadians', '$divide', '$eq', '$exp', '$filter', '$first',\r\n\t'$floor', '$function', '$gt', '$gte', '$hour', '$ifNull', '$in', '$indexOfArray', '$indexOfBytes',\r\n\t'$indexOfCP', '$isArray', '$isNumber', '$isoDayOfWeek', '$isoWeek', '$isoWeekYear', '$last',\r\n\t'$last', '$let', '$literal', '$ln', '$log', '$log10', '$lt', '$lte', '$ltrim', '$map', '$max',\r\n\t'$mergeObjects', '$meta', '$min', '$millisecond', '$minute', '$mod', '$month', '$multiply', '$ne',\r\n\t'$not', '$objectToArray', '$or', '$pow', '$push', '$radiansToDegrees', '$range', '$reduce',\r\n\t'$regexFind', '$regexFindAll', '$regexMatch', '$replaceOne', '$replaceAll', '$reverseArray', '$round',\r\n\t'$rtrim', '$second', '$setDifference', '$setEquals', '$setIntersection', '$setIsSubset', '$setUnion',\r\n\t'$size', '$sin', '$slice', '$split', '$sqrt', '$stdDevPop', '$stdDevSamp', '$strcasecmp', '$strLenBytes',\r\n\t'$strLenCP', '$substr', '$substrBytes', '$substrCP', '$subtract', '$sum', '$switch', '$tan',\r\n\t'$toBool', '$toDate', '$toDecimal', '$toDouble', '$toInt', '$toLong', '$toObjectId', '$toString',\r\n\t'$toLower', '$toUpper', '$trim', '$trunc', '$type', '$week', '$year', '$zip', '$count', '$dateAdd',\r\n\t'$dateDiff', '$dateSubtract', '$dateTrunc', '$getField', '$rand', '$sampleRate', '$setField', '$unsetField',\r\n\r\n\t// aggregation pipeline query modifiers\r\n\t'$comment', '$explain', '$hint', '$max', '$maxTimeMS', '$min', '$orderby', '$query',\r\n\t'$returnKey', '$showDiskLoc', '$natural',\r\n].map(operator => operator.replace('$', '\\\\$'));\r\n\r\nvar builtinFunctions = [\r\n\t'ObjectId',\r\n\t'Code',\r\n\t'BinData',\r\n\t'DBRef',\r\n\t'Timestamp',\r\n\t'NumberLong',\r\n\t'NumberDecimal',\r\n\t'MaxKey',\r\n\t'MinKey',\r\n\t'RegExp',\r\n\t'ISODate',\r\n\t'UUID',\r\n];\r\n\r\nvar operatorsSource = '(?:' + operators.join('|') + ')\\\\b';\r\n\r\nvar mongodb = languages.mongodb = clone(languages.js);\r\n\r\ninsertBefore(mongodb, 'string', {\r\n\t'property': {\r\n\t\tpattern: /(?:([\"'])(?:\\\\[\\s\\S]|(?!\\1)[^\\\\\\n])*\\1|(?!\\d)(?:(?!\\s)[$\\w\\xa0-\\uffff])+)(?=\\s*:)/g,\r\n\t\tgreedy: true,\r\n\t\tinside: {\r\n\t\t\t'keyword': RegExp(`^([\"'])?` + operatorsSource + '(?:\\\\1)?$')\r\n\t\t}\r\n\t}\r\n});\r\n\r\nmongodb.string.inside = {\r\n\turl: {\r\n\t\t// url pattern\r\n\t\tpattern: /https?:\\/\\/[\\w@:%.~#=+-]{1,256}\\.[a-z\\d()]{1,6}\\b[()?&/\\w@:%.~#=+-]*/gi,\r\n\t\tgreedy: true\r\n\t},\r\n\tentity: {\r\n\t\t// ipv4\r\n\t\tpattern: /\\b(?:(?:[01]?\\d\\d?|2[0-4]\\d|25[0-5])\\.){3}(?:[01]?\\d\\d?|2[0-4]\\d|25[0-5])\\b/g,\r\n\t\tgreedy: true\r\n\t}\r\n};\r\n\r\ninsertBefore(mongodb, 'constant', {\r\n\t'builtin': {\r\n\t\tpattern: RegExp('\\\\b(?:' + builtinFunctions.join('|') + ')\\\\b'),\r\n\t\talias: 'keyword'\r\n\t}\r\n});\r\n"],"names":[],"mappings":"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"}