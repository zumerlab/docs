{"version":3,"file":"docker.js","sources":["../../../src/prism/languages/docker.js"],"sourcesContent":["import { languages } from '../core.js';\r\nimport { re, replace } from '../utils/shared.js';\r\n\r\n// Many of the following regexes will contain negated lookaheads like `[ \\t]+(?![ \\t])`. This is a trick to ensure\r\n// that quantifiers behave *atomically*. Atomic quantifiers are necessary to prevent exponential backtracking.\r\n\r\nvar spaceAfterBackSlash = /\\\\\\n(?:\\s|\\\\\\n|#.*(?!.))*(?![\\s#]|\\\\\\n)/.source;\r\n// At least one space, comment, or line break\r\nvar space = replace(/(?:[ \\t]+(?![ \\t])<0>?|<0>)/.source, [spaceAfterBackSlash]);\r\n\r\nvar string = /\"(?:\\\\[\\s\\S]|[^\\\\\\n\"])*\"|'(?:\\\\[\\s\\S]|[^\\\\\\n'])*'/g;\r\nvar stringSrc = string.source;\r\nvar option = replace(/--[\\w-]+=(?:<0>|(?![\"'])(?:\\\\.|[^\\\\\\s])+)/.source, [stringSrc]);\r\n\r\nvar stringRule = {\r\n\tpattern: string,\r\n\tgreedy: true\r\n};\r\nvar commentRule = {\r\n\tpattern: /(^[ \\t]*)#.*/mg,\r\n\tlookbehind: true,\r\n\tgreedy: true\r\n};\r\n\r\nlanguages.dockerfile = languages.docker = {\r\n\t'instruction': {\r\n\t\tpattern: /(^[ \\t]*)(?:add|arg|cmd|copy|entrypoint|env|expose|from|healthcheck|label|maintainer|onbuild|run|shell|stopsignal|user|volume|workdir)(?=\\s)(?:\\\\.|[^\\\\\\n])*(?:\\\\$(?:\\s|#.*$)*(?![\\s#])(?:\\\\.|[^\\\\\\n])*)*/img,\r\n\t\tlookbehind: true,\r\n\t\tgreedy: true,\r\n\t\tinside: {\r\n\t\t\t'options': {\r\n\t\t\t\tpattern: re(/(^(?:onbuild<0>)?\\w+<0>)<1>(?:<0><1>)*/.source, [space, option], 'gi'),\r\n\t\t\t\tlookbehind: true,\r\n\t\t\t\tgreedy: true,\r\n\t\t\t\tinside: {\r\n\t\t\t\t\t'property': {\r\n\t\t\t\t\t\tpattern: /(^|\\s)--[\\w-]+/,\r\n\t\t\t\t\t\tlookbehind: true\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'string': [\r\n\t\t\t\t\t\tstringRule,\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tpattern: /(=)(?![\"'])(?:\\\\.|[^\\\\\\s])+/,\r\n\t\t\t\t\t\t\tlookbehind: true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\t'operator': /\\\\$/m,\r\n\t\t\t\t\t'punctuation': /=/\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t'keyword': [\r\n\t\t\t\t{\r\n\t\t\t\t\t// https://docs.docker.com/engine/reference/builder/#healthcheck\r\n\t\t\t\t\tpattern: re(/(^(?:onbuild<0>)?healthcheck<0>(?:<1><0>)*)(?:cmd|none)\\b/.source, [space, option], 'gi'),\r\n\t\t\t\t\tlookbehind: true,\r\n\t\t\t\t\tgreedy: true\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t// https://docs.docker.com/engine/reference/builder/#from\r\n\t\t\t\t\tpattern: re(/(^(?:onbuild<0>)?from<0>(?:<1><0>)*(?!--)[^ \\t\\\\]+<0>)as/.source, [space, option], 'gi'),\r\n\t\t\t\t\tlookbehind: true,\r\n\t\t\t\t\tgreedy: true\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t// https://docs.docker.com/engine/reference/builder/#onbuild\r\n\t\t\t\t\tpattern: re(/(^onbuild<0>)\\w+/.source, [space], 'gi'),\r\n\t\t\t\t\tlookbehind: true,\r\n\t\t\t\t\tgreedy: true\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tpattern: /^\\w+/g,\r\n\t\t\t\t\tgreedy: true\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\t'comment': commentRule,\r\n\t\t\t'string': stringRule,\r\n\t\t\t'variable': /\\$(?:\\w+|\\{[^{}\"'\\\\]*\\})/,\r\n\t\t\t'operator': /\\\\$/m\r\n\t\t}\r\n\t},\r\n\t'comment': commentRule\r\n};\r\n"],"names":[],"mappings":";;AAMA,IAAI,sBAAsB;AAE1B,IAAI,QAAQ,QAAQ,6BAAsC,CAAC,mBAAmB,CAAC;AAE/E,IAAI,SAAS;AACb,IAAI,YAAY,OAAO;AACvB,IAAI,SAAS,QAAQ,mDAAoD,CAAC,SAAS,CAAC;AAEpF,IAAI,aAAa;AAAA,EAChB,SAAS;AAAA,EACT,QAAQ;AACT;AACA,IAAI,cAAc;AAAA,EACjB,SAAS;AAAA,EACT,YAAY;AAAA,EACZ,QAAQ;AACT;AAEA,UAAU,aAAa,UAAU,SAAS;AAAA,EACzC,eAAe;AAAA,IACd,SAAS;AAAA,IACT,YAAY;AAAA,IACZ,QAAQ;AAAA,IACR,QAAQ;AAAA,MACP,WAAW;AAAA,QACV,SAAS,GAAG,2CAAiD,CAAC,OAAO,MAAM,GAAG,IAAI;AAAA,QAClF,YAAY;AAAA,QACZ,QAAQ;AAAA,QACR,QAAQ;AAAA,UACP,YAAY;AAAA,YACX,SAAS;AAAA,YACT,YAAY;AAAA,UACZ;AAAA,UACD,UAAU;AAAA,YACT;AAAA,YACA;AAAA,cACC,SAAS;AAAA,cACT,YAAY;AAAA,YACZ;AAAA,UACD;AAAA,UACD,YAAY;AAAA,UACZ,eAAe;AAAA,QACf;AAAA,MACD;AAAA,MACD,WAAW;AAAA,QACV;AAAA;AAAA,UAEC,SAAS,GAAG,8DAAoE,CAAC,OAAO,MAAM,GAAG,IAAI;AAAA,UACrG,YAAY;AAAA,UACZ,QAAQ;AAAA,QACR;AAAA,QACD;AAAA;AAAA,UAEC,SAAS,GAAG,6DAAmE,CAAC,OAAO,MAAM,GAAG,IAAI;AAAA,UACpG,YAAY;AAAA,UACZ,QAAQ;AAAA,QACR;AAAA,QACD;AAAA;AAAA,UAEC,SAAS,GAAG,qBAA2B,CAAC,KAAK,GAAG,IAAI;AAAA,UACpD,YAAY;AAAA,UACZ,QAAQ;AAAA,QACR;AAAA,QACD;AAAA,UACC,SAAS;AAAA,UACT,QAAQ;AAAA,QACR;AAAA,MACD;AAAA,MACD,WAAW;AAAA,MACX,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,YAAY;AAAA,IACZ;AAAA,EACD;AAAA,EACD,WAAW;AACZ;"}