{"version":3,"file":"promql.js","sources":["../../../src/prism/languages/promql.js"],"sourcesContent":["import { languages } from '../core.js';\r\n\r\n// PromQL vector matching + the by and without clauses\r\n// (https://prometheus.io/docs/prometheus/latest/querying/operators/#vector-matching)\r\nvar vectorMatching = 'on|ignoring|group_right|group_left|by|without';\r\n\r\nlanguages.promql = {\r\n\t'comment': {\r\n\t\tpattern: /(^[ \\t]*)#.*/m,\r\n\t\tlookbehind: true\r\n\t},\r\n\t'vector-match': {\r\n\t\t// Match the comma-separated label lists inside vector matching:\r\n\t\tpattern: RegExp('((?:' + vectorMatching + ')\\\\s*)\\\\([^)]*\\\\)'),\r\n\t\tlookbehind: true,\r\n\t\tinside: {\r\n\t\t\t'label-key': {\r\n\t\t\t\tpattern: /\\b[^,]+\\b/,\r\n\t\t\t\talias: 'attr-name',\r\n\t\t\t},\r\n\t\t\t'punctuation': /[(),]/\r\n\t\t},\r\n\t},\r\n\t'context-labels': {\r\n\t\tpattern: /\\{[^{}]*\\}/,\r\n\t\tinside: {\r\n\t\t\t'label-key': {\r\n\t\t\t\tpattern: /\\b[a-z_]\\w*(?=\\s*(?:=|![=~]))/,\r\n\t\t\t\talias: 'attr-name',\r\n\t\t\t},\r\n\t\t\t'label-value': {\r\n\t\t\t\tpattern: /([\"'`])(?:\\\\[\\s\\S]|(?!\\1)[^\\\\])*\\1/g,\r\n\t\t\t\tgreedy: true,\r\n\t\t\t\talias: 'attr-value',\r\n\t\t\t},\r\n\t\t\t'punctuation': /\\{|\\}|=~?|![=~]|,/,\r\n\t\t},\r\n\t},\r\n\t'context-range': [\r\n\t\t{\r\n\t\t\tpattern: /\\[[\\w\\s:]+\\]/, // [1m]\r\n\t\t\tinside: {\r\n\t\t\t\t'punctuation': /[[\\]:]/,\r\n\t\t\t\t'range-duration': {\r\n\t\t\t\t\tpattern: /\\b(?:\\d+(?:[smhdwy]|ms))+\\b/i,\r\n\t\t\t\t\talias: 'number',\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tpattern: /(\\boffset\\s+)\\w+/, // offset 1m\r\n\t\t\tlookbehind: true,\r\n\t\t\tinside: {\r\n\t\t\t\t'range-duration': {\r\n\t\t\t\t\tpattern: /\\b(?:\\d+(?:[smhdwy]|ms))+\\b/i,\r\n\t\t\t\t\talias: 'number',\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t],\r\n\t'keyword': RegExp('\\\\b(?:sum|min|max|avg|group|stddev|stdvar|count|count_values|bottomk|topk|quantile|' + vectorMatching + '|offset)\\\\b', 'i'),\r\n\t'function': /\\b[a-z_]\\w*(?=\\s*\\()/i,\r\n\t'number': /[+-]?(?:(?:\\b\\d+(?:\\.\\d+)?|\\B\\.\\d+)(?:e[+-]?\\d+)?\\b|\\b(?:0x[a-f\\d]+|nan|inf)\\b)/i,\r\n\t'operator': /[!=<>]=|[%^<>/*+-]|\\b(?:and|or|unless)\\b/i,\r\n\t'punctuation': /[()[\\]{}.,;`]/,\r\n};\r\n"],"names":[],"mappings":";AAIA,IAAI,iBAAiB;AAErB,UAAU,SAAS;AAAA,EAClB,WAAW;AAAA,IACV,SAAS;AAAA,IACT,YAAY;AAAA,EACZ;AAAA,EACD,gBAAgB;AAAA;AAAA,IAEf,SAAS,OAAO,SAAS,iBAAiB,mBAAmB;AAAA,IAC7D,YAAY;AAAA,IACZ,QAAQ;AAAA,MACP,aAAa;AAAA,QACZ,SAAS;AAAA,QACT,OAAO;AAAA,MACP;AAAA,MACD,eAAe;AAAA,IACf;AAAA,EACD;AAAA,EACD,kBAAkB;AAAA,IACjB,SAAS;AAAA,IACT,QAAQ;AAAA,MACP,aAAa;AAAA,QACZ,SAAS;AAAA,QACT,OAAO;AAAA,MACP;AAAA,MACD,eAAe;AAAA,QACd,SAAS;AAAA,QACT,QAAQ;AAAA,QACR,OAAO;AAAA,MACP;AAAA,MACD,eAAe;AAAA,IACf;AAAA,EACD;AAAA,EACD,iBAAiB;AAAA,IAChB;AAAA,MACC,SAAS;AAAA;AAAA,MACT,QAAQ;AAAA,QACP,eAAe;AAAA,QACf,kBAAkB;AAAA,UACjB,SAAS;AAAA,UACT,OAAO;AAAA,QACP;AAAA,MACD;AAAA,IACD;AAAA,IACD;AAAA,MACC,SAAS;AAAA;AAAA,MACT,YAAY;AAAA,MACZ,QAAQ;AAAA,QACP,kBAAkB;AAAA,UACjB,SAAS;AAAA,UACT,OAAO;AAAA,QACP;AAAA,MACD;AAAA,IACD;AAAA,EACD;AAAA,EACD,WAAW,OAAO,wFAAwF,iBAAiB,eAAe,GAAG;AAAA,EAC7I,YAAY;AAAA,EACZ,UAAU;AAAA,EACV,YAAY;AAAA,EACZ,eAAe;AAChB;"}